!function(e){"use strict";const t={initValues:function(e){e.missings={required:[],optional:[]},e.different={},e.errors=[],e.compiled={}},objLiteral:function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},typesAccepted:["string","number","boolean","array","object"],getType:{obj:function(e){return Array.isArray(e)?"array":typeof e},schema:function(e){let r;if(Array.isArray(e))r="mixed";else if(t.objLiteral(e))r=e.hasOwnProperty("type")?e.type:"object";else{const i=typeof e;r="string"===i&&-1!==t.typesAccepted.indexOf(e)?e:i}return r}},reg:function(e,t,r){let i=!1;return r?e.hasOwnProperty(r)||(e[r]=t,i=!0):(e.push(t),i=!0),i},mergeProps:function(e,t,r){const i=t.errors;let o,n;i.length&&(e.errors=e.errors.concat(i)),["required","optional"].forEach((function(r){o=t.missings[r],o.length&&(e.missings[r]=e.missings[r].concat(o))})),["different","compiled"].forEach((function(i){n=t[i],Object.keys(n).length&&(e[i].hasOwnProperty(r)||(e[i][r]={}),e[i][r]=n)}))}};function r(e){if(!e)return console.log("Object missing ",e);this.schema=Object.assign({},e),t.initValues(this)}r.prototype.compile=function(e){return e&&this.validate(e),!this.missings.required.length&&this.compiled},r.prototype.validate=function(e){t.initValues(this);const i=this.schema,o=this;let n=!0;return Object.keys(i).forEach((function(s){const c=i[s],a=t.getType.schema(c);if(e.hasOwnProperty(s)){const i=e[s],l=t.getType.obj(i);switch(a){case"string":case"number":case"boolean":case"array":a!==l?(c.required&&(n=!1),t.reg(o.different,{current:l,expected:a,value:i},s)):t.reg(o.compiled,i,s);break;case"object":if("object"===l)if(c.hasOwnProperty("properties")){const e=new r(c.properties);e.validate(i)||(n=!1),t.mergeProps(o,e,s)}else t.reg(o.compiled,i,s);else c.required&&(n=!1,t.reg(o.different,{current:l,expected:a,value:i},s));break;case"mixed":!c.filter((function(e){return e===l})).length&&c.required?(n=!1,t.reg(o.different,{current:l,expected:c,value:i},s)):t.reg(o.compiled,i,s);break;default:console.log("format type dont accepted: "+a),n=!1}}else{let e;c.required?(n=!1,e="required"):e="optional",t.reg(o.missings[e],s),c.default&&(o.compiled[s]=c.default)}})),n},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=r),exports.Schema=r):e.Schema=r}(this);
//# sourceMappingURL=schema.min.js.map
