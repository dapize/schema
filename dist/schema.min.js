!function(e){"use strict";const t={objLiteral:function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},typesAccepted:["string","number","boolean","array","object"],getType:{obj:function(e){return Array.isArray(e)?"array":typeof e},schema:function(e){let r;if(Array.isArray(e))r="mixed";else if(t.objLiteral(e))r=e.hasOwnProperty("type")?e.type:"object";else{const o=typeof e;r="string"===o&&-1!==t.typesAccepted.indexOf(e)?e:o}return r}},reg:function(e,t,r){let o=!1;return r?e.hasOwnProperty(r)||(e[r]=t,o=!0):(e.push(t),o=!0),o},mergeProps:function(e,t,r){const o=t.errors;let i,n;o.length&&(e.errors=e.errors.concat(o)),["required","optional"].forEach((function(r){i=t.missings[r],i.length&&(e.missings[r]=e.missings[r].concat(i))})),["different","compiled"].forEach((function(o){n=t[o],Object.keys(n).length&&(e[o].hasOwnProperty(r)||(e[o][r]={}),e[o][r]=n)}))}};function r(e){this.schema=Object.assign({},e),this.missings={required:[],optional:[]},this.different={},this.errors=[],this.compiled={}}r.prototype.compile=function(e){return e&&this.validate(e),!this.missings.required.length&&this.compiled},r.prototype.validate=function(e){const o=this.schema,i=this;let n=!0;return Object.keys(o).forEach((function(s){const c=o[s],a=t.getType.schema(c);if(e.hasOwnProperty(s)){const o=e[s],p=t.getType.obj(o);switch(a){case"string":case"number":case"boolean":case"array":a!==p?(c.required&&(n=!1),t.reg(i.different,{current:p,expected:a,value:o},s)):t.reg(i.compiled,o,s);break;case"object":if("object"===p)if(c.hasOwnProperty("properties")){const e=new r(c.properties);e.validate(o)||(n=!1),t.mergeProps(i,e,s)}else t.reg(i.compiled,o,s);else c.required&&(n=!1,t.reg(i.different,{current:p,expected:a,value:o},s));break;case"mixed":!c.filter((function(e){return e===p})).length&&c.required?(n=!1,t.reg(i.different,{current:p,expected:c,value:o},s)):t.reg(i.compiled,o,s);break;default:console.log("format type dont accepted: "+a),n=!1}}else{let e;c.required?(n=!1,e="required"):e="optional",t.reg(i.missings[e],s),c.default&&(i.compiled[s]=c.default)}})),n},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=r),exports.Schema=r):e.Schema=r}(this);
//# sourceMappingURL=schema.min.js.map
